//[JB] Relies on build artifacts, so run `gradle jar` first.

plugins { id 'com.jfrog.bintray' version '1.8.4' }

apply plugin: 'maven-publish'

repositories { jcenter() }
configure(project) {
  project.version = "11.0.2"
  project.ext.jarFile = "kit/build/libs/scenebuilder-kit-${project.version}.jar"
}

publishing {
  publications {
    BinTray(MavenPublication) {
      groupId 'org.jetbrains.intellij.deps'
      artifactId 'scenebuilderkit'
      artifact source: project.ext.jarFile
    }
  }
}

bintray {
  user = System.getenv('BINTRAY_USER')
  key = System.getenv('BINTRAY_KEY')
  publish = true

  pkg {
    repo = 'intellij-third-party-dependencies'
    userOrg = 'jetbrains'
    name = 'scenebuilderkit'
    vcsUrl = 'https://github.com/JetBrains/scenebuilder'
    licenses = ['BSD']
    version { name = project.version }
  }

  publications = ['BinTray']
}